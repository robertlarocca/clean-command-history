#!/bin/bash

# Copyright (c) 2022 Robert LaRocca http://www.laroccx.com

# require root privileges
require_root_privileges() {
	if [ $(id -u) != 0 ]; then
		logger -i "Error: $(basename $0 .sh) must be run as root!"
		echo "Error: $(basename $0 .sh) must be run as root!"
		exit 1
	fi
}

require_root_privileges

main() {
	# Install clean command
	sudo cp -b -S .bak -v $PWD/clean.sh /usr/local/bin/clean

	chown root:root /usr/local/bin/clean
	chmod 0755 /usr/local/bin/clean

	# # Noninteractive (nologin) shells
	# cat <<-EOF_XYZ | sudo tee /etc/profile.d/clean.csh
	# # clean script
	# if [ -f /usr/local/bin/clean ]; then
	#   . /usr/local/bin/clean
	# fi
	# EOF_XYZ

	# cat <<-EOF_XYZ | sudo tee /etc/profile.d/clean.sh
	# # clean script
	# if [ -f /usr/local/bin/clean ]; then
	#   . /usr/local/bin/clean
	# fi
	# EOF_XYZ

	# chown root:root /etc/profile.d/clean.*sh
	# chmod 0644 /etc/profile.d/clean.*sh

	# # Interactive (login) shells
	# cat <<-EOF_XYZ | sudo tee -a /etc/bash.bashrc

	# # clean script
	# if [ -f /usr/local/bin/clean ]; then
	#   . /usr/local/bin/clean
	# fi
	# EOF_XYZ
}

main "$@"

# vi: syntax=sh ts=4 noexpandtab
